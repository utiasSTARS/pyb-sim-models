<?xml version="1.0" encoding="utf-8"?>
<robot xmlns:xacro="http://ros.org/wiki/xacro">
 <xacro:macro name="Robotiq_2F85" params="parent name enable_underactuation:=true soft_pads:=false softness *origin">
  <joint name="${parent}_${name}_base_joint" type="fixed">
	<xacro:insert_block name="origin"/>
	<parent link="${parent}"/>
	<child link="${name}_base"/>
  </joint>
  <link
    name="${name}_base">
    <inertial>
      <origin
        xyz="6.91E-06 4.4117E-06 0.031656"
        rpy="0 0 0" />
      <mass
        value="0.60831" />
      <inertia
        ixx="0.0004596"
        ixy="1.5559E-09"
        ixz="1.397E-07"
        iyy="0.0005181"
        iyz="-1.0325E-11"
        izz="0.00036051" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/base.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.89804 0.91765 0.92941 0.25" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/base.STL" />
      </geometry>
    </collision>
  </link>
  <link
    name="${name}_right_spring_link">
    <inertial>
      <origin
        xyz="-9.7222E-12 0.028253 6.791E-10"
        rpy="0 0 0" />
      <mass
        value="0.029951" />
      <inertia
        ixx="1.5103E-05"
        ixy="-1.0709E-16"
        ixz="-2.654E-15"
        iyy="5.0789E-06"
        iyz="3.2666E-14"
        izz="1.0707E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/right_spring_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.89804 0.91765 0.92941 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/right_spring_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="${name}_right_spring_link_joint"
    type="revolute">
    <origin
      xyz="0.0127 -0.061307 0"
      rpy="3.1416 0 0.6983" />
    <parent
      link="${name}_base" />
    <child
      link="${name}_right_spring_link" />
    <axis
      xyz="0 0 1" />
    <limit
      lower="0"
      upper="0.7854"
      effort="0"
      velocity="0" />
  </joint>
  <link
    name="${name}_left_spring_link">
    <inertial>
      <origin
        xyz="-8.05421701555176E-13 0.0282525952540491 7.27854432947014E-10"
        rpy="0 0 0" />
      <mass
        value="0.0299513316731757" />
      <inertia
        ixx="1.51025275365861E-05"
        ixy="1.3893966137107E-16"
        ixz="-5.21047318848845E-15"
        iyy="5.07891354120236E-06"
        iyz="3.47379370230503E-14"
        izz="1.0706817344978E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/left_spring_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.898039215686275 0.917647058823529 0.929411764705882 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/left_spring_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="${name}_left_spring_link_joint"
    type="revolute">
    <origin
      xyz="-0.0127 -0.061307 0"
      rpy="3.1416 0 -0.70092" />
    <parent
      link="${name}_base" />
    <child
      link="${name}_left_spring_link" />
    <axis
      xyz="0 0 1" />
    <limit
      lower="-0.7854"
      upper="0"
      effort="0"
      velocity="0" />
  </joint>
  <link
    name="${name}_right_driver">
    <inertial>
      <origin
        xyz="0.0179377478479594 0.000926031753317007 -4.0741034207454E-11"
        rpy="0 0 0" />
      <mass
        value="0.0184906489409923" />
      <inertia
        ixx="6.79440339903172E-07"
        ixy="-2.0728790158877E-07"
        ixz="5.46290681974064E-15"
        iyy="3.45929623837714E-06"
        iyz="7.55029433009734E-15"
        izz="3.75009298146153E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/right_driver.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.898039215686275 0.917647058823529 0.929411764705882 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/right_driver.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="${name}_right_driver_joint"
    type="revolute">
    <origin
      xyz="0.030601 -0.054792 0"
      rpy="3.1416 0 -0.019735" />
    <parent
      link="${name}_base" />
    <child
      link="${name}_right_driver" />
    <axis
      xyz="0 0 1" />
    <limit
      lower="-3.1416"
      upper="3.1416"
      effort="150"
      velocity="0" />
  </joint>
  <link
    name="${name}_right_coupler">
    <inertial>
      <origin
        xyz="-0.00277693278884095 0.0214010778170948 -2.64117771736162E-15"
        rpy="0 0 0" />
      <mass
        value="0.0273093985570947" />
      <inertia
        ixx="8.4351877262463E-06"
        ixy="8.05599897942411E-07"
        ixz="3.98563616297657E-19"
        iyy="2.33117687880373E-06"
        iyz="-6.91949626399278E-19"
        izz="6.9133328065108E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/right_coupler.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.898039215686275 0.917647058823529 0.929411764705882 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/right_coupler.STL" />
      </geometry>
    </collision>
  </link>
  <xacro:unless value="${enable_underactuation}">
      <joint
        name="${name}_right_coupler_joint"
        type="fixed">
        <origin
          xyz="0.031486 -0.0040855 0"
          rpy="0 0 -0.25804" />
        <parent
          link="${name}_right_driver" />
        <child
          link="${name}_right_coupler" />
      </joint>
  </xacro:unless>
  <xacro:if value="${enable_underactuation}">
    <joint
        name="${name}_right_coupler_joint"
        type="revolute">
        <origin
          xyz="0.031486 -0.0040855 0"
          rpy="0 0 -0.25804" />
        <parent
          link="${name}_right_driver" />
        <child
          link="${name}_right_coupler" />
        <axis
          xyz="0 0 -1" />
        <limit
          lower="0.13"
          upper="0.79"
          effort="0"
          velocity="0" />
    </joint>
  </xacro:if>
  <link
    name="${name}_right_follower">
    <inertial>
      <origin
        xyz="0.0118738800643238 0.013213950103123 -6.42371679073841E-16"
        rpy="0 0 0" />
      <mass
        value="0.0195548943464751" />
      <inertia
        ixx="3.99125345460037E-06"
        ixy="-9.32228708142781E-07"
        ixz="-1.06756339811242E-18"
        iyy="1.28831055431048E-06"
        iyz="-9.53069862405573E-19"
        izz="4.59174098263665E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/right_follower.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.898039215686275 0.917647058823529 0.929411764705882 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/right_follower.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="${name}_right_follower_joint"
    type="revolute">
    <origin
      xyz="-0.0061148 0.047125 0"
      rpy="3.1416 0 -2.9033" />
    <parent
      link="gripper_right_coupler" />
    <child
      link="gripper_right_follower" />
    <axis
      xyz="0 0 1" />
    <limit
      lower="-3.1416"
      upper="3.1416"
      effort="0"
      velocity="0" />
  </joint>
  <link
    name="${name}_right_pad">
    <inertial>
      <origin
        xyz="0.000197179990555962 0.003 -5.73415880070697E-15"
        rpy="0 0 0" />
      <mass
        value="0.0112846745192962" />
      <inertia
        ixx="4.84198905594698E-07"
        ixy="1.17467826101044E-22"
        ixz="-2.69493952498347E-22"
        iyy="1.75287448520128E-06"
        iyz="3.01393554780919E-23"
        izz="1.33638362672235E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/right_pad.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.529411764705882 0.549019607843137 0.549019607843137 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/right_pad.STL" />
      </geometry>
    </collision>
  </link>
  <xacro:unless value="${soft_pads}">
      <joint
        name="${name}_right_pad_joint"
        type="fixed">
        <origin
          xyz="0.024903 0.032264 0"
          rpy="3.1416 0 -1.5708" />
        <parent
          link="${name}_right_follower" />
        <child
          link="${name}_right_pad" />
        <axis
          xyz="0 0 0" />
      </joint>
  </xacro:unless>
  <xacro:if value="${soft_pads}">
    <joint
        name="${name}_right_pad_joint"
        type="fixed">
        <origin
          xyz="0.024903 0.032264 0"
          rpy="3.1416 0 -1.5708" />
        <parent
          link="${name}_right_follower" />
        <child
          link="${name}_right_pad" />
        <axis xyz="0 1 0"/>
        <limit effort="${softness}" lower="0" upper="0.003" velocity="0.1"/>
      </joint>
  </xacro:if>
  <link
    name="${name}_left_driver">
    <inertial>
      <origin
        xyz="0.0179377478480944 0.000926031754016808 -4.09476305946672E-11"
        rpy="0 0 0" />
      <mass
        value="0.0184906489414316" />
      <inertia
        ixx="6.79440340033055E-07"
        ixy="-2.07287901659297E-07"
        ixz="5.48822371152932E-15"
        iyy="3.45929623843939E-06"
        iyz="7.56200742857023E-15"
        izz="3.75009298156646E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/left_driver.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.898039215686275 0.917647058823529 0.929411764705882 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/left_driver.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="${name}_left_driver_joint"
    type="revolute">
    <origin
      xyz="-0.030601 -0.054792 0"
      rpy="0 0 -3.1245" />
    <parent
      link="${name}_base" />
    <child
      link="${name}_left_driver" />
    <axis
      xyz="0 0 1" />
    <limit
      lower="-3.1416"
      upper="3.1416"
      effort="150"
      velocity="0" />
  </joint>
  <link
    name="${name}_left_coupler">
    <inertial>
      <origin
        xyz="-0.00277693278884093 0.0214010778170948 -2.65696393157366E-15"
        rpy="0 0 0" />
      <mass
        value="0.0273093985570947" />
      <inertia
        ixx="8.43518772624629E-06"
        ixy="8.05599897942414E-07"
        ixz="3.98028057558574E-19"
        iyy="2.33117687880373E-06"
        iyz="-6.91715450328278E-19"
        izz="6.9133328065108E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/left_coupler.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.898039215686275 0.917647058823529 0.929411764705882 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/left_coupler.STL" />
      </geometry>
    </collision>
  </link>
  <xacro:unless value="${enable_underactuation}">
    <joint
    name="${name}_left_coupler_joint"
    type="fixed">
    <origin
      xyz="0.031486 -0.0040855 0"
      rpy="3.1416 0 -3.1416" />
    <parent
      link="${name}_left_driver" />
    <child
      link="${name}_left_coupler" />
    </joint>
  </xacro:unless>
  <xacro:if value="${enable_underactuation}">
    <joint
    name="${name}_left_coupler_joint"
    type="revolute">
    <origin
      xyz="0.031486 -0.0040855 0"
      rpy="3.1416 0 -3.1416" />
    <parent
      link="${name}_left_driver" />
    <child
      link="${name}_left_coupler" />
    <axis
      xyz="0 0 1" />
    <limit
      lower="0.13"
      upper="0.79"
      effort="0"
      velocity="0" />
    </joint>
  </xacro:if>
  
  <link
    name="${name}_left_follower">
    <inertial>
      <origin
        xyz="0.0118738800643238 0.013213950103123 2.13813023929037E-15"
        rpy="0 0 0" />
      <mass
        value="0.0195548943464751" />
      <inertia
        ixx="3.99125345460038E-06"
        ixy="-9.32228708142783E-07"
        ixz="-1.06843707618223E-18"
        iyy="1.28831055431048E-06"
        iyz="-9.54631781105362E-19"
        izz="4.59174098263666E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/left_follower.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.898039215686275 0.917647058823529 0.929411764705882 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/left_follower.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="${name}_left_follower_joint"
    type="revolute">
    <origin
      xyz="-0.0061148 0.047125 0"
      rpy="0 0 0.017192" />
    <parent
      link="${name}_left_coupler" />
    <child
      link="${name}_left_follower" />
    <axis
      xyz="0 0 1" />
    <limit
      lower="-3.1416"
      upper="3.1416"
      effort="0"
      velocity="0" />
  </joint>
  <link
    name="${name}_left_pad">
    <inertial>
      <origin
        xyz="0.00019717999055599 0.003 8.49842392779646E-15"
        rpy="0 0 0" />
      <mass
        value="0.0112846745192961" />
      <inertia
        ixx="4.84198905594697E-07"
        ixy="7.66025016740815E-22"
        ixz="4.8234593310579E-23"
        iyy="1.75287448520127E-06"
        iyz="-9.35905899337494E-24"
        izz="1.33638362672235E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/left_pad.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.529411764705882 0.549019607843137 0.549019607843137 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://Robotiq_2F85/meshes/left_pad.STL" />
      </geometry>
    </collision>
  </link>
  <xacro:unless value="${soft_pads}">
      <joint
        name="${name}_left_pad_joint"
        type="fixed">
        <origin
          xyz="0.018903 0.032265 0"
          rpy="0 0 -1.5708" />
        <parent
          link="${name}_left_follower" />
        <child
          link="${name}_left_pad" />
        <axis
          xyz="0 0 0" />
      </joint>
  </xacro:unless>
  <xacro:if value="${soft_pads}">
    <joint
        name="${name}_left_pad_joint"
        type="prismatic">
        <origin
          xyz="0.018903 0.032265 0"
          rpy="0 0 -1.5708" />
        <parent
          link="${name}_left_follower" />
        <child
          link="${name}_left_pad" />
        <axis xyz="0 -1 0"/>
        <limit effort="${softness}" lower="0" upper="0.003" velocity="0.1"/>
      </joint>
  </xacro:if>
 </xacro:macro>
</robot>
